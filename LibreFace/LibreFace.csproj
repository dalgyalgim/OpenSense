<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<TargetFramework>netstandard2.1</TargetFramework>
		<LangVersion>11.0</LangVersion>
		<ImplicitUsings>enable</ImplicitUsings>
		<Nullable>enable</Nullable>
		<RootNamespace>LibreFace</RootNamespace>
		<AssemblyName>LibreFace</AssemblyName>
		<EmbedAllSources>true</EmbedAllSources>
		<Version>1.0.0</Version>

        <!-- CUDA conditions-->
        <!--Note: CUDA and cuDNN are required. Check version numbers at https://onnxruntime.ai/docs/tutorials/csharp/csharp-gpu.html-->
        <!--<DefineConstants>$(DefineConstants);CUDA</DefineConstants>-->
        <UseCUDA Condition="$([System.Text.RegularExpressions.Regex]::IsMatch($(DefineConstants), '^(.*;)*CUDA(;.*)*$'))">true</UseCUDA>
        <Platforms Condition="'$(UseCUDA)' == 'true'">x64</Platforms>
        <PlatformTarget Condition="'$(UseCUDA)' == 'true'">x64</PlatformTarget>
    </PropertyGroup>

	<ItemGroup>
		<PackageReference Include="Microsoft.ML.OnnxRuntime" Version="1.15.1" Condition="'$(UseCUDA)' != 'true'"/>
		<PackageReference Include="Microsoft.ML.OnnxRuntime.Gpu" Version="1.14.1" Condition="'$(UseCUDA)' == 'true'" />
		<PackageReference Include="System.Collections.Immutable" Version="7.0.0" />
		<PackageReference Include="System.Numerics.Tensors" Version="0.1.0" />
	</ItemGroup>

	<ItemGroup>
		<None Update="LibreFace_AU.onnx">
			<CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
		</None>
        <None Update="LibreFace_FE.onnx">
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </None>
	</ItemGroup>

</Project>
